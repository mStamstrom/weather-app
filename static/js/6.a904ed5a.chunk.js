(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[6],{34:function(t,e,n){"use strict";n(0),n(35);var a=n(3);e.a=function(t){var e=t.name;return Object(a.jsxs)("header",{className:"App-header header",children:[Object(a.jsx)("a",{href:"".concat("/weather-app","/list"),className:"App-menu",children:Object(a.jsx)("span",{className:"fas fa-list"})}),Object(a.jsx)("h1",{className:"App-title",children:e})]})}},35:function(t,e,n){},36:function(t,e,n){"use strict";var a=n(43),c=n(38),r=(n(0),n(3));e.a=function(t){switch(t.icon){case"Sun":case"Clear":return Object(r.jsx)(c.a,{icon:a.c,color:"yellow"});case"Rain":return Object(r.jsx)(c.a,{icon:a.d,color:"blue"});case"Snow":return Object(r.jsx)(c.a,{icon:a.b});case"Clouds":case"Fog":default:return Object(r.jsx)(c.a,{icon:a.a,color:"grey"})}}},37:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return u}));var a="794fd1eb804018f71fb274449e212c02",c="https://api.openweathermap.org/data/2.5/";function r(t){return fetch("".concat(c,"weather?q=").concat(t,"&appid=").concat(a,"&units=metric")).then((function(t){if(200===t.status)return t.json();throw new Error(t.statusText)}))}function i(t,e){return fetch("".concat(c,"weather?lat=").concat(t,"&lon=").concat(e,"&appid=").concat(a,"&units=metric")).then((function(t){if(200===t.status)return t.json();throw new Error(t.statusText)}))}function s(t,e){return fetch("".concat(c,"forecast?lat=").concat(t,"&lon=").concat(e,"&appid=").concat(a,"&units=metric")).then((function(t){if(200===t.status)return t.json();throw new Error(t.statusText)}))}function o(t){return fetch("".concat(c,"group?id=").concat(t,"&appid=").concat(a,"&units=metric")).then((function(t){if(200===t.status)return t.json();throw new Error(t.statusText)}))}function u(t){return fetch("".concat(c,"forecast?id=").concat(t,"&appid=").concat(a,"&units=metric")).then((function(t){if(200===t.status)return t.json();throw new Error(t.statusText)}))}},48:function(t,e,n){},49:function(t,e,n){},57:function(t,e,n){},61:function(t,e,n){"use strict";n.r(e);var a=n(30),c=n(31),r=n(46),i=n(33),s=n(32),o=n(0),u=n(34),d=function t(e,n){Object(a.a)(this,t),this.id=void 0,this.name=void 0,this.id=e,this.name=n},l=n(37),f="weather-cities";function h(){return JSON.parse(localStorage.getItem(f)||"[]")}n(48);var j,p,b,m,x=n(3),O=function(t){Object(i.a)(n,t);var e=Object(s.a)(n);function n(t){var c;return Object(a.a)(this,n),(c=e.call(this,t)).onChange=function(t){c.setState({text:t.target.value})},c.addCity=function(t){t.preventDefault(),c.state.text&&(c.setState({text:""}),c.props.addCity(c.state.text))},c.state={text:""},c}return Object(c.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("form",{onSubmit:this.addCity,className:"add-city",children:[Object(x.jsx)("span",{className:"add-city__header",children:"L\xe4gg till stad"}),Object(x.jsxs)("div",{className:"add-city-input",children:[Object(x.jsx)("div",{className:"add-city-input-container",children:Object(x.jsx)("input",{type:"text",className:"add-city-input-field__input",onChange:this.onChange,value:this.state.text})}),Object(x.jsx)("button",{type:"submit","data-testid":"plus-button",children:Object(x.jsx)("i",{className:"fas fa-2x fa-plus-circle"})})]})]})}}]),n}(o.Component),v=(n(49),n(50)),w=n(51),y=n(36),g=w.a.a(j||(j=Object(v.a)(["\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n  border-bottom: 1px solid white;\n  padding: 10px;\n"]))),C=w.a.span(p||(p=Object(v.a)(["\n  padding-top: 4px;\n  padding-right: 5px;\n"]))),S=w.a.button(b||(b=Object(v.a)(["\n  color: red;\n"]))),N=w.a.div(m||(m=Object(v.a)(["\n  display: flex;\n  align-items: center;\n"]))),I=function(t){var e=t.item,n=t.removeItem;return Object(x.jsxs)(g,{as:"a",href:"city/".concat(e.id),children:[Object(x.jsx)(C,{children:e.name}),Object(x.jsxs)(N,{children:[Object(x.jsx)(C,{children:Math.round(e.main.temp)}),Object(x.jsx)(y.a,{icon:e.weather[0].main}),Object(x.jsx)(S,{type:"button",onClick:function(t){return n(e,t)},children:Object(x.jsx)("i",{className:"fa fa-2x fa-minus-circle"})})]})]})},k=n(38),A=(n(57),function(t){var e=t.errorString;return Object(x.jsxs)("div",{className:"error",children:[Object(x.jsx)(k.a,{icon:"exclamation-circle"}),Object(x.jsx)("span",{className:"error-text",children:e})]})}),E=function(t){Object(i.a)(n,t);var e=Object(s.a)(n);function n(t){var c;return Object(a.a)(this,n),(c=e.call(this,t)).state={cities:[],error:""},c.removeItem=c.removeItem.bind(Object(r.a)(c)),c.addCity=c.addCity.bind(Object(r.a)(c)),c}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this;navigator.geolocation.getCurrentPosition((function(e){var n=e.coords,a=n.latitude,c=n.longitude;Object(l.b)(a,c).then((function(e){var n=t.state.cities;n.unshift(e),t.setState({cities:n})})).catch((function(){return t.setState({error:"Could not get weather of current location"})}))}));var e=h();if(e.length>0){var n=e.map((function(t){return t.id})).reduce((function(t,e){return"".concat(t,",").concat(e)}));Object(l.c)(n).then((function(e){return t.setState({cities:e.list})})).catch((function(){return t.setState({error:"Could not get weather for stored cities"})}))}}},{key:"render",value:function(){var t=this;return Object(x.jsxs)("div",{className:"full-scale city-handler",children:[this.state.error?Object(x.jsx)(A,{errorString:this.state.error}):"",Object(x.jsxs)("div",{className:"App-cities",children:[Object(x.jsx)(u.a,{name:"City view"}),this.state.cities.map((function(e){return Object(x.jsx)(I,{item:e,removeItem:t.removeItem},e.name)}))]}),Object(x.jsx)("div",{className:"App-cities",children:Object(x.jsx)(O,{addCity:this.addCity})})]})}},{key:"addCity",value:function(t){var e=this,n=this.state.cities;void 0===n.find((function(e){return e.name.toLowerCase()===t.toLowerCase()}))?Object(l.a)(t).then((function(a){n.push(a),function(t){var e=h();e.push(t),localStorage.setItem(f,JSON.stringify(e))}(new d(a.id,t)),e.setState({cities:n})})).catch((function(){return e.setState({error:"Could not get weather for specified city"})})):this.setState({error:"City already exists"})}},{key:"removeItem",value:function(t,e){e.preventDefault();var n=this.state.cities.filter((function(e){return e.name!==t.name}));!function(t){var e=h().filter((function(e){return e.name.toLowerCase()!==t.name.toLowerCase()}));localStorage.setItem(f,JSON.stringify(e))}(t),this.setState({cities:n})}}]),n}(o.Component);e.default=E}}]);
//# sourceMappingURL=6.a904ed5a.chunk.js.map